# example sweetpotato build script

sweetpotato:
    example:
      - echo: this is an example target
      - require: settokens
      - echo: tokens are go
      - echo: 'sweetpotato will count from 0 to {{countto}} -1'
      - do: {'target': echocount, 'range':'{{countto}}', 'settoken':iteration}
      - echo: sweetpotato makes counting easy!
      - db:
          type: sweetpotato
          path: build.yaml
          read:
              root: somedata
              target: echomood
              do:
                  - echo: I am a nested echo task nested in-line inside a do task!
                  - echo: this part has mutex
                  - fields:
                      name: personName
                      mood: personMood

    settokens:
        - token:
            countto: 5

    echocount:
        - echo: '{{iteration}}'

    echomood:
        - echo: '{{personName}} is feeling {{personMood}}'

    longrun: 
        - lock: 
            key: locktest
            do:
                - do: {'target': donothing, 'range': 1000, 'settoken':iteration}
                - echo: done longrun 
    longerrun: 
        - lock: 
            key: locktest
            do:
                - do: {'target': donothing, 'range': 100000, 'settoken':iteration}
                - echo: done longerrun 
    sayhello:
        - echo: why, hello there!
    donothing:

somedata:
    - {'name':bob,'mood':happy}
    - {'name':ann,'mood':silly}
    - {'name':joe,'mood':sleepy}
    - {'name':tom,'mood':angry}
    - {'name':sue,'mood':mopey}
    - {'name':tim,'mood':curious}
    - {'name':ken,'mood':amorous}
    - {'name':don,'mood':coy}
    - {'name':mel,'mood':scared}

